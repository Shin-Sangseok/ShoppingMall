<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="productlike">

	<!-- 쿼리없이 가공으로 전체 하트리스트 만들었음. -->
	<!-- 메인리스트 각 상품의 전체 총 좋아요 개수  -->
  <!-- <select id="MainLikeCountList" parameterType="likeVO" resultType="int">
	   SELECT COUNT(like_idx)
	   FROM productlike
	   WHERE product_idx=#{product_idx}
  </select> -->

  <!--  test sql : SELECT COUNT(like_idx) FROM productlike WHERE product_idx=3  -->

	<!-- 상품 상세보기에서 유저들이 보는 하트 좋아요. -->

  <!-- product_idx로 join한 뒤 product_like의 총 개수를 보여준다. -->
  <!-- product 테이블에서 product_like 컬럼이 없어졌으므로 서비스에서 컬렉션 2차 재가공한다. -->
  
  
  <!-- product_idx 상품마다 좋아요 총합. -->
  <!-- > &gt  < &lt 부등호 나타낼 때 바꿔서 나타내야 함. -->
  <select id="SumProductLike" parameterType="productpageVO" resultType="java.util.Map">
  	select
		product_idx , sum(likecheck) as likecheck 
	from productlike 
	group by product_idx , likecheck 
	having product_idx &lt;= #{rowPerPage}
  </select>
  
  
  
	<!-- 	
	select
	product_idx ,sum(likecheck) as likecheck 
	from productlike 
		group by product_idx , likecheck 
		having product_idx <=20
	
	 -->








</mapper>